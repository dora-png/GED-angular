<br>
<div class="row">
  <div class="col-md-12">
    <app-breadcrumb></app-breadcrumb>
  </div>
</div>
<br />
<div class="row">
  <div class="col-md-12">
      <mat-card>
          <div class="row"></div>
          <div class="container-fluid">
              <form [formGroup]="newProfileFormGroup" class="example-form">
                  <div class="row">
                    <div class="col-md-12">
                      <mat-form-field class="example-full-width" appearance="fill">
                        <mat-label>Profile Name</mat-label>
                        <input autocomplete="off" (keyup)="onChangeInput($event)"  formControlName="name" name="name" id="name" required  matInput>
                        <mat-error *ngIf="f['name'].touched && f['name'].errors">
                          {{f["name"].errors|json}}
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-12">   
                      <h4>Type de profil</h4>
                      <mat-form-field appearance="fill" class="example-full-width">
                      <mat-label>Choisir le type du profil</mat-label>
                      <mat-select (click)="onTouch()" (ngModelChange)="onChange($event)" [(ngModel)]="selectedValue" [ngModelOptions]="{standalone: true}" name="typeprofil" id="typeprofil">
                          <mat-option *ngFor="let typeProfile of typeProfiles" [value]="typeProfile.value">
                              {{typeProfile.name}}
                            </mat-option>
                      </mat-select>
                      </mat-form-field>       
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <br>
                      <br>
                      <div class="example-list" (click)="setGroup()">
                       <div  class="example-box" >                                
                              <i class="fa fa-chevron-circle-right fa-2x" aria-hidden="true">
                                  <strong>Set Group for Profile</strong> 
                              </i>              
                       </div>
                     </div>
                  </div>
                  <div class="col-md-6">
                    <br>
                    <br>
                    <div class="example-list">
                     <div  class="example-box" >                                
                            <i class="fa fa-2x" aria-hidden="true">
                                <strong>Value: </strong> 
                                <strong *ngIf="groupUser!.idgroupes != 0;else  other"> {{groupUser!.name}}</strong>
                                  <ng-template #other>
                                  <strong > None</strong>
                                </ng-template>
                            </i>              
                     </div>
                   </div>
                </div>
                  </div>
                  <div class="row">
                  <div class="col-md-6">
                    <br>
                    <br>
                    <div class="example-list" (click)="setStructure()">
                     <div  class="example-box" >                                
                            <i class="fa fa-chevron-circle-right fa-2x" aria-hidden="true">
                                <strong>Set Structure for Profile</strong> 
                            </i>              
                     </div>
                   </div>
                </div>
                <div class="col-md-6">
                  <br>
                  <br>
                  <div class="example-list">
                   <div  class="example-box" >                                
                          <i class="fa fa-2x" aria-hidden="true">
                              <strong>Value: </strong> 
                              <strong *ngIf="structure!.idstructure != 0;else  other"> {{structure!.name}}</strong>
                                <ng-template #other>
                                <strong > None</strong>
                              </ng-template>
                          </i>              
                   </div>
                 </div>
              </div>
                </div>
                
                <div class="row">
                  <div class="col-md-6">
                    <br>
                    <br>
                    <div class="example-list" (click)="setUser()">
                     <div  class="example-box" >                                
                            <i class="fa fa-chevron-circle-right fa-2x" aria-hidden="true">
                                <strong>Set User</strong> 
                            </i>              
                     </div>
                   </div>
                </div>
                <div class="col-md-6">
                  <br>
                  <br>
                  <div class="example-list">
                   <div  class="example-box" >                                
                          <i class="fa fa-2x" aria-hidden="true">
                              <strong>Value: </strong> 
                              <strong > {{ currentUser }}</strong>
                          </i>              
                   </div>
                 </div>
              </div>
                </div>
                
                <br />
                  <div class="row">
                    <div class="col-md-12" *ngIf="clicked">
                      <i class='fa fa-spinner fa-spin fa-4x '></i> 
                    </div>
                    <div class="col-md-6">
                        <button type="button"  class="btn btn-danger btn-lg btn-block" *ngIf="!clicked">Reset</button>
                    </div>
                    <div class="col-md-6">
                        <button type="button" (click)="saveProfile()" class="btn btn-success btn-lg btn-block"[disabled]="!onValidData()" *ngIf="!clicked">Save</button>
                    </div>
                </div>
                
              </form>
                
          </div>
        </mat-card>
    </div>        
</div>
